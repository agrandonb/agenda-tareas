<!DOCTYPE html> 
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Registro de Tareas Diario</title>
  <link rel="stylesheet" href="estilos.css">
  <style>
    /* Contenedor de grÃ¡ficos lado a lado */
    .graficos-container {
      display: flex;
      gap: 20px;
      flex-wrap: wrap;
      margin-top: 30px;
    }
    .graficos-container canvas {
      flex: 1 1 400px;
      max-width: 100%;
    }

    /* Estilo tÃ­tulo historial con cursor y flecha */
    .titulo-historial {
      cursor: pointer;
      user-select: none;
    }
    .titulo-historial::before {
      content: "â–¶ ";
      transition: transform 0.2s ease;
    }
    .titulo-historial.abierto::before {
      content: "â–¼ ";
    }
  </style>
</head>
<body>
  <h1>Registro de Tareas Diario</h1>

  <!-- DÃ­a y fecha -->
  <div class="dia-semana" id="diaSemana"></div>

  <!-- Contenedor de tareas -->
  <div class="contenedor" id="contenedorTareas"></div>

  <h2 class="titulo-calendario" id="tituloCalendario" onclick="toggleCalendario()">ðŸ“… Calendario</h2>
<div id="contenedorCalendario" style="display:none; margin:15px 0; padding:15px; background:#fff; border-radius:10px; box-shadow:0 2px 6px rgba(0,0,0,0.1);">
  <label for="fechaSeleccion">Selecciona una fecha:</label>
  <input type="date" id="fechaSeleccion">

  <label for="selectCaja">Selecciona caja:</label>
  <select id="selectCaja">
    <option value="p1">Gestiones primera prioridad</option>
    <option value="p2">Gestiones segunda prioridad</option>
    <option value="p3">Gestiones tercera prioridad</option>
    <option value="c1">BÃºsqueda bases</option>
    <option value="c2">Actualizar registros</option>
  </select>

  <input type="text" id="nuevaTareaCalendario" placeholder="Escribe nueva tarea...">

  <div style="margin-top:10px;">
    <button onclick="agregarTareaCalendario(false)">âž• Solo este dÃ­a</button>
    <button onclick="agregarTareaCalendario(true)">ðŸ“Œ Fijo este dÃ­a de la semana</button>
  </div>
</div>

  <!-- Caja de notas -->
  <div class="caja-notas">
    <h2>Notas:</h2>
    <textarea id="notasDia" placeholder="Escribe tus notas aquÃ­..."></textarea>
  </div>

  <!-- Botones de opciones -->
  <div class="botones-opciones">
    <button onclick="exportarCSV()">Exportar CSV</button>
    <button onclick="limpiarAntiguos()">Limpiar Registros Antiguos</button>
  </div>

  <!-- Historial plegable -->
  <h2 class="titulo-historial" id="tituloHistorial" onclick="toggleHistorial()">Historial</h2>
  <div class="historial-container" id="historial" style="display:none;"></div>

  <!-- Filtros de historial -->
  <div id="filtrosHistorial" style="margin-top:10px; display:none;">
    <button onclick="actualizarHistorial('7d')">Ãšltimos 7 dÃ­as</button>
    <button onclick="actualizarHistorial('mes')">Mes actual</button>
    <button onclick="actualizarHistorial('todo')">Todo</button>
  </div>

  <!-- Contenedor de grÃ¡ficos lado a lado -->
  <div class="graficos-container">
    <canvas id="graficoSemanal" width="400" height="200"></canvas>
    <canvas id="graficoHoras" width="400" height="200"></canvas>
  </div>

  <!-- Chart.js -->
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <!-- Script principal -->
  <script src="script.js"></script>

  <!-- FunciÃ³n para desplegar/plegar historial -->
  <script>
    function toggleHistorial() {
      const historialContainer = document.getElementById("historial");
      const filtros = document.getElementById("filtrosHistorial");
      const titulo = document.getElementById("tituloHistorial");
      const visible = historialContainer.style.display === "block";

      historialContainer.style.display = visible ? "none" : "block";
      filtros.style.display = visible ? "none" : "block";
      titulo.classList.toggle("abierto", !visible);
    }
  </script>
</body>
</html>
